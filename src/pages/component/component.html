<!--
  Generated template for the ComponentPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="light">
    <ion-title>Component</ion-title>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
       
    </button>
  </ion-navbar>

</ion-header>


<ion-content >
  <div *ngIf="ccs">
    <ion-card>
        <ion-item>
            <ion-label>Site<b style="color:rgb(172, 18, 18)"> * </b></ion-label>
            <ion-select >
              <ion-option value={{item.Site}} *ngFor="let item of name" (ionSelect)="onChange(item.SiteId)">{{item.Site}}</ion-option>
            
            </ion-select>
          </ion-item>
    </ion-card>
    <ion-card>
        <ion-item>
            <ion-label>Equipment</ion-label>
            <ion-select multiple="true" [(ngModel)]="equipnetall">
              <ion-option value={{item.EqpPlanId}} *ngFor="let item of sub" >{{item.EqpPlan}}</ion-option>
         
            </ion-select>
         </ion-item>
    </ion-card>
        <ion-card>
            <ion-item>
                <ion-label>Component Code</ion-label>
                <ion-select [(ngModel)]="component_code" multiple="true" >
                  <ion-option value="{{item.ComponentCodeID}}"  *ngFor="let item of conponentcode" >{{item.Description}}</ion-option>
               
                </ion-select>
       </ion-item>
        </ion-card>
             <ion-card>
                <ion-item>
                    <ion-label>Task Type</ion-label>
                    <ion-select [(ngModel)]="tasktype">
                      <ion-option value="cc"  >CC</ion-option>
                   
                    </ion-select>
               </ion-item>
      
             </ion-card>
                   

               
             
               <p style="color:rgb(124, 25, 25)"><b>Note:</b> * field are mandatory</p>
            
              <ion-row>
                  <ion-col col-12 text-center >
                      <button ion-button color="secondary" [disabled]="!idget" round (click)="dashboad()">Submit</button>
              
                  </ion-col>
           </ion-row>



           <div class="fst" *ngFor="let tag of tablenew; let i=index; ">

              <p style="background-color:#f6882d;text-align: center;padding: 2px;color:white;"> {{getObjectKey(tag)}} </p>
    
    
           
              <ion-card  *ngFor="let subitem of tag[getObjectKey(tag)]; let j=index;">
                  <ion-item style="margin-bottom:1%" 
                  (click)="eventdetails(subitem)">  
                      <h6><b>Equipment: </b> {{subitem.EqpPlan}}</h6>
                      <h6><b>Component Code: </b>{{subitem.ComponentCode}}</h6>
                      <h6><b>Percentage Life Consumed: </b> {{subitem.Percentage_Life_Consumed}} %</h6>
               
          
                  </ion-item>
              </ion-card>
           
    
         
    
        </div>

                
  </div>

  
  <div *ngIf="ch">
    <ion-card>
        <ion-item>
            <ion-label>Site<b style="color:rgb(172, 18, 18)"> * </b></ion-label>
            <ion-select >
              <ion-option value={{item.Site}} *ngFor="let item of name" (ionSelect)="onChange(item.SiteId)">{{item.Site}}</ion-option>
            
            </ion-select>
          </ion-item>
    </ion-card>
    <ion-card>
        <ion-item>
            <ion-label>Equipment</ion-label>
            <ion-select multiple="true" [(ngModel)]="equipnetall">
              <ion-option value={{item.EqpPlanId}} *ngFor="let item of sub" (ionSelect)="onset(item)">{{item.EqpPlan}}</ion-option>
         
            </ion-select>
         </ion-item>
    </ion-card>
  <ion-card>
      <ion-item>
          <ion-label>Component Code</ion-label>
          <ion-select [(ngModel)]="component_code" multiple="true">
            <ion-option value="{{item.ComponentCodeID}}"  *ngFor="let item of conponentcode">{{item.Description}}</ion-option>
         
          </ion-select>
 </ion-item>
  </ion-card>
        
<ion-card>
    <ion-item>
        <ion-label>Task Type</ion-label>
        <ion-select [(ngModel)]="tasktype">
          <ion-option value="cc"  >CC</ion-option>
       
        </ion-select>
   </ion-item>
</ion-card>
     
    

    <p style="color:rgb(124, 25, 25)"><b>Note:</b> * field are mandatory</p>
  
    <ion-row>
        <ion-col col-12 text-center >
            <button ion-button color="secondary" round [disabled]="!idget" (click)="dashboadHistory()">Submit</button>
    
        </ion-col>
 </ion-row>



 <div class="fst" *ngFor="let tag of tablenew; let i=index; ">

    <p style="background-color:#f6882d;text-align: center;padding: 2px;color:white;"> {{getObjectKey(tag)}} </p>

    <ion-card *ngFor="let subitem of tag[getObjectKey(tag)]; let j=index;">
        <ion-item  style="margin-bottom:1%" 
        (click)="eventdetails(subitem)">  
            <h6><b>Equipment: </b> {{subitem.EqpPlan}}</h6>
            <h6><b>Component: </b>{{subitem.Component}}</h6>
            <h6><b>Last Change Usage: </b> {{subitem.Last_Change_Usage}} </h6>
            <h6><b>Last Change Date: </b> {{subitem.Last_Change_Date}} </h6>
            <h6><b>Next Change out Usage: </b> {{subitem.NextOcc}} </h6>
            <h6><b>Next Change out Date: </b> {{subitem.NextOccDate}} </h6>
            
        </ion-item>
    </ion-card>
 



</div>


  </div>

  
  <div *ngIf="mc">
       <ion-card>
          <ion-item>
              <ion-label>Site<b style="color:rgb(172, 18, 18)"> * </b></ion-label>
                <ion-select >
                  <ion-option value={{item.Site}} *ngFor="let item of name" (ionSelect)="onChange(item.SiteId)">{{item.Site}}</ion-option>
                
                </ion-select>
              </ion-item>
       </ion-card>
        <ion-card>
            <ion-item>
                <ion-label>Equipment</ion-label>
                <ion-select multiple="true" [(ngModel)]="equipnetall">
                  <ion-option value={{item.EqpPlanId}} *ngFor="let item of sub" >{{item.EqpPlan}}</ion-option>
             
                </ion-select>
             </ion-item>
        </ion-card>
      <ion-card>
          <ion-item>
              <ion-label>Component Code</ion-label>
              <ion-select [(ngModel)]="component_code" multiple="true">
                <ion-option value="{{item.ComponentCodeID}}"  *ngFor="let item of conponentcode">{{item.Description}}</ion-option>
             
              </ion-select>
     </ion-item>
      </ion-card>
      <ion-card>
          <ion-item >
              <ion-label >Approval Status  </ion-label>
              <ion-select [(ngModel)]="approval_status">
                  <ion-option value="Approve">Approve</ion-option>
                  <ion-option value="Pending">Pending</ion-option>
                  <ion-option value="Denied">Denied</ion-option>
                </ion-select>
            </ion-item>  
      </ion-card>
        
                 
                  <p style="color:rgb(124, 25, 25)" text-center><b>Note:</b> * field are mandatory</p> 
                   <ion-row>
                          <ion-col col-12 text-center >
                              <button ion-button color="secondary" round  [disabled]="!idget" (click)="details()">Submit</button>
                      
                          </ion-col>
                   </ion-row>
  
    </div>
                 

</ion-content>

